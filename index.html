<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playstation 2</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="./static/css/style.css">
</head>

<body>
    <div id="header">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/PlayStation_2_logo.svg/2560px-PlayStation_2_logo.svg.png" class="w-200">

        <div id="menu">
            <a href="./index.html" class="dec azul f-size">Home</a>
            <a href="./console.html" class="dec roxo f-size">Console</a>
            <a href="./history.html" class="dec vermelho f-size">History</a>
            <a href="./contacts.html" class="dec verde f-size">Contacts</a>
        </div>
    </div>
    
    <div id="games"></div>
</body>

<script type="text/javascript" src="static/js/vanilla.js"></script>
<script type="text/javascript">
    fetch('./static/data/games.json')
        .then(response => response.json())
        .then(data => {
            var dadosJogos = data;
            populate(dadosJogos);
        })
        .catch(error => {
            console.log('Ocorreu um erro:', error);
        });

    function populate(dadosJogos) {
        var divGames = document.getElementById("games");
        for (let [index, jogo] of dadosJogos.entries()) {
            let img = document.createElement('img');
            img.src = jogo['capa'];
            img.classList.add('w-200');
            img.classList.add('h-285');
            img.classList.add('b-shadow');
            img.classList.add('m-top');

            let a = document.createElement('a');
            a.classList.add("m-left");
            a.href = `./game-wiki.html?id=${index}`;

            let div = document.createElement('div');

            a.appendChild(img);
            div.appendChild(a);
            divGames.appendChild(div);
        }

        // Adicionar o script vanilla aos elementos
        const script = document.createElement('script');
        script.textContent = `
            const elements = document.querySelectorAll('#games .w-200');
            elements.forEach(element => {
                VanillaTilt.init(element, {
                    max: 25,
                    speed: 500,
                    glare: true,
                    "max-glare": 1,
                });
            });
        `;
        document.body.appendChild(script);
    }
</script>

</html>